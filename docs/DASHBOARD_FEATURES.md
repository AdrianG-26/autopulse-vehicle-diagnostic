# üöó Proactive Vehicle Maintenance Dashboard - Feature Documentation

## Overview

The dashboard has been completely redesigned to showcase **ML predictions** and **essential vehicle data** for your proactive maintenance project. It displays real-time data with 1-second update intervals.

---

## üìä Dashboard Sections

### 1. **ML Prediction Section** (Top Priority)

Located at the top with a **blue border** to highlight ML-powered insights.

#### ML Health Score

- **Visual Donut Chart**: 80px circular progress indicator
- **Color-coded**:
  - üü¢ Green (80-100): Excellent condition
  - üü° Yellow (60-79): Good condition
  - üî¥ Red (0-59): Attention needed
- **Real-time updates**: Every 1 second
- **Source**: Random Forest model prediction

#### ML Status

- **4 Status Levels**:
  - ‚úÖ **NORMAL**: All systems operating normally
  - ‚ö†Ô∏è **ADVISORY**: Minor attention recommended
  - ‚ö†Ô∏è **WARNING**: Requires attention soon
  - üî¥ **CRITICAL**: Immediate action required
- Color-coded backgrounds for quick visual identification

#### System Status

- Parallel status from traditional diagnostics
- Validates ML predictions
- Shows fault types when detected

#### Diagnostic Trouble Codes (DTCs)

- **Live count** of active trouble codes
- üü¢ Green background when 0 (All Clear)
- üî¥ Red background when > 0 (Check Engine)
- Essential for OBD-II compliance

#### ML Alerts

- Dynamic list of maintenance recommendations
- Generated by Random Forest model
- Shows top priority items
- Example: "‚úÖ All systems operating normally - ML model confident"

#### Fault Type Display

- Specific issue detection
- Examples:
  - "All Parameters Normal"
  - "Elevated Operating Temperature"
  - "High Engine Load Detected"

---

### 2. **ML Model Input Features** üß†

Displays the **4 primary features** used by the Random Forest model:

| Feature               | Description                     | Importance                         |
| --------------------- | ------------------------------- | ---------------------------------- |
| **Engine RPM**        | Revolutions per minute          | Primary indicator of engine state  |
| **Coolant Temp**      | Engine coolant temperature (¬∞C) | Critical for overheating detection |
| **Engine Load**       | Calculated engine load (%)      | Indicates engine stress level      |
| **Throttle Position** | Accelerator pedal position (%)  | Driver input measurement           |

**Visual Design**:

- Light gray background cards
- Large, readable numbers
- Real-time updates
- Clear unit labels

---

### 3. **Calculated Performance Metrics** üìä

Shows **derived features** that the ML model analyzes:

#### Load/RPM Ratio

- **Formula**: (Engine Load / RPM) √ó 1000
- **Purpose**: Efficiency indicator
- **Color**: Yellow background (efficiency metric)
- **Interpretation**: Lower is generally better for fuel economy

#### Temperature Gradient

- **Formula**: Rate of coolant temperature change
- **Purpose**: Detects rapid temperature changes
- **Color**: Blue background (thermal metric)
- **Alert Trigger**: Rapid changes may indicate issues

#### Throttle Response

- **Formula**: Throttle Position / 100
- **Purpose**: Measures driver input ratio
- **Color**: Indigo background (response metric)
- **Range**: 0.0 to 1.0

#### Engine Stress Score

- **Formula**: Composite calculation from load, RPM, and temperature
- **Purpose**: Overall engine stress indicator
- **Color**: Red background (stress metric)
- **Range**: 0-100 (higher = more stress)

---

### 4. **Essential Sensor Readings** üîß

Real-time data from all active OBD-II sensors:

- **Vehicle Speed**: Current speed in km/h
- **Intake Temperature**: Air intake temp (¬∞C)
- **Timing Advance**: Ignition timing (degrees)
- **O2 Sensor**: Oxygen sensor voltage (V)
- **Catalyst Temperature**: Catalytic converter temp (¬∞C)
- **Barometric Pressure**: Atmospheric pressure (kPa)

**Layout**: Responsive grid (auto-fit, minimum 160px per card)

---

### 5. **Fuel System** ‚õΩ

Complete fuel system monitoring:

| Metric                 | Description                    | Normal Range            |
| ---------------------- | ------------------------------ | ----------------------- |
| **Fuel Pressure**      | Fuel rail pressure (psi)       | 30-50 psi typical       |
| **Fuel Efficiency**    | Current efficiency percentage  | 40-60%                  |
| **Short Fuel Trim**    | Short-term fuel correction (%) | -10% to +10%            |
| **Long Fuel Trim**     | Long-term fuel correction (%)  | -10% to +10%            |
| **Fuel System Status** | Operating mode                 | "Closed Loop" is normal |

**Key Indicators**:

- Fuel trim values outside normal range indicate issues
- "Closed Loop" = system using O2 sensor feedback (good)
- "Open Loop" = sensor not active (startup or fault)

---

### 6. **System Information** ‚öôÔ∏è

Technical system data:

- **Control Module Voltage**: ECU power supply (should be ~13.8V)
- **Engine Runtime**: Time since engine start (seconds)
- **EGR Error**: Exhaust Gas Recirculation error percentage
- **Session ID**: Unique identifier for current data collection session

---

## üé® Design Features

### Visual Hierarchy

1. **ML Predictions** (top, blue border, most prominent)
2. **ML Features** (primary inputs)
3. **Calculated Metrics** (derived features)
4. **Sensor Data** (raw measurements)
5. **Fuel & System** (supporting data)

### Color Coding

- **Blue**: ML predictions and AI features
- **Yellow**: Efficiency and calculated metrics
- **Green**: Normal/healthy status
- **Yellow/Orange**: Advisory/warning status
- **Red**: Critical/error status
- **Gray**: Neutral sensor readings

### Connection Status Banner

- **Green Banner**: Live data streaming
- **Red Banner**: Waiting for vehicle data
- Shows last update timestamp
- Displays data quality score (0-100%)

---

## üìà Data Flow

```
Vehicle OBD-II Port
    ‚Üì
Bluetooth Scanner (00:1D:A5:68:98:8A)
    ‚Üì
automated_car_collector_daemon.py
    ‚Üì
SQLite Database (src/data/vehicle_data.db)
    ‚Üì
Flask API (/api/latest endpoint)
    ‚Üì
React Dashboard (HTTP Polling @ 1s intervals)
    ‚Üì
Real-time Display (1-second updates)
```

---

## üîÑ Update Intervals

- **Dashboard Polling**: 1 second (ultra-responsive)
- **Data Collection**: ~1 second from OBD-II
- **ML Prediction**: Every new reading
- **Database Write**: Every sensor reading
- **API Response Time**: <100ms typical

---

## üß† ML Model Details

### Model Type

**Random Forest Classifier**

- File: `vehicle_maintenance_rf_rpi_compatible_20251026_200238.joblib`
- Accuracy: **100%** on test data
- Confidence: ~97.4% average

### Input Features

1. `rpm` - Engine RPM
2. `coolant_temp` - Coolant temperature
3. `engine_load` - Calculated engine load
4. `throttle_pos` - Throttle position

### Calculated Features

5. `load_rpm_ratio` - Efficiency metric
6. `temp_gradient` - Temperature change rate
7. `throttle_response` - Response ratio
8. `engine_stress_score` - Composite stress indicator

### Output

- **Health Score**: 0-100 (higher is better)
- **Status**: NORMAL, ADVISORY, WARNING, CRITICAL
- **Alerts**: List of maintenance recommendations
- **Confidence**: Model prediction confidence (0-1)

---

## üì± Responsive Design

The dashboard uses **CSS Grid** with `auto-fit` and `minmax()`:

```css
gridtemplatecolumns: "repeat(auto-fit, minmax(200px, 1fr))";
```

**Benefits**:

- Automatically adjusts to screen size
- Works on desktop, tablet, and mobile
- Maintains readability at all sizes
- Cards stack vertically on small screens

---

## üöÄ Performance Optimizations

### Frontend

- ‚úÖ **1-second polling** for real-time feel
- ‚úÖ **Minimal re-renders** (only when data changes)
- ‚úÖ **Small payload** (single latest reading)
- ‚úÖ **No WebSocket overhead** (simpler HTTP)

### Backend

- ‚úÖ **Indexed database queries** (fast lookups)
- ‚úÖ **Single record fetch** (minimal data transfer)
- ‚úÖ **Pre-calculated metrics** (stored in DB)
- ‚úÖ **ML predictions cached** (no re-computation)

---

## üéØ Key Metrics for Proactive Maintenance

### Critical Indicators

1. **ML Health Score < 60**: Schedule inspection
2. **DTCs > 0**: Check diagnostic codes
3. **Coolant Temp > 100¬∞C**: Overheating risk
4. **Engine Stress > 70**: Reduce load
5. **Fuel Trim > ¬±10%**: Fuel system issue

### Trending Analysis (Future Enhancement)

- Track health score over time
- Identify degradation patterns
- Predict maintenance needs
- Generate service recommendations

---

## üìä Current Live Data Example

```
ML Health Score: 75/100 (Good)
ML Status: ADVISORY
System Status: ADVISORY
DTCs: 0 (All Clear)

ML Features:
  RPM: 749.0
  Coolant Temp: 100.0¬∞C
  Engine Load: 39.6%
  Throttle Pos: 17.6%

Calculated Metrics:
  Load/RPM Ratio: 52.88
  Temp Gradient: 0.0¬∞C
  Throttle Response: 0.176
  Engine Stress: 20.0

Sensor Data:
  Vehicle Speed: 0.0 km/h (idling)
  Intake Temp: 76.0¬∞C
  Fuel Pressure: 40.0 psi
  Fuel System: Closed Loop
  Data Quality: 94%
```

---

## üîß Troubleshooting

### Dashboard shows "N/A" for all values

- Check if Flask API is running: `ps aux | grep web_server`
- Verify data collection: `python3 -c "import sqlite3; c=sqlite3.connect('src/data/vehicle_data.db').cursor(); print(c.execute('SELECT COUNT(*) FROM enhanced_sensor_data WHERE timestamp > datetime(\"now\", \"-1 minute\")').fetchone()[0], 'recent records')"`
- Check SSH tunnel: `lsof -i :5000`

### ML Health Score stuck at 0

- Verify ML model file exists: `ls -lh src/models/*.joblib`
- Check Flask logs for ML errors
- Ensure numpy is installed: `pip3 list | grep numpy`

### Data not updating (timestamp frozen)

- Check data collector: `ps aux | grep automated_car_collector`
- Verify OBD scanner connected: `hcitool con`
- Check collector logs: `tail -50 /tmp/collector_corrected.log`

---

## üìö Related Documentation

- `ML_MODEL_REPORT.md` - ML model performance details
- `POLLING_ARCHITECTURE.md` - Architecture overview
- `WORKFLOW_GUIDE.md` - System operation guide
- `PROJECT_STRUCTURE.md` - File organization

---

## üéâ Summary

Your dashboard now provides:

‚úÖ **Real-time ML predictions** with visual health score  
‚úÖ **All ML model input features** clearly displayed  
‚úÖ **Calculated performance metrics** for analysis  
‚úÖ **Complete sensor data** organized by category  
‚úÖ **Fuel system monitoring** with status indicators  
‚úÖ **System diagnostics** with DTC tracking  
‚úÖ **Professional design** with color-coded status  
‚úÖ **Ultra-responsive updates** (1-second intervals)  
‚úÖ **Mobile-friendly layout** (responsive grid)  
‚úÖ **Data quality indicators** for confidence

**Perfect for proactive vehicle maintenance!** üöóüí°
